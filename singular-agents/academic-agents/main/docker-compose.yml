services:
  academic-api:
    build: .
    container_name: academic-api
    image: academic-api:latest
    ports:
      - "8500:8500"  # host:container (changed to 8500)
    environment:
      PORT: "8500"
      WEB_CONCURRENCY: "2"
      # Required API keys (Config validates at startup)
      GEMINI_API_KEY: "${GEMINI_API_KEY}"
      OPENROUTER_API_KEY: "${OPENROUTER_API_KEY}"
      GROQ_API_KEY: "${GROQ_API_KEY}"
      # Optional config
      AUTO_CLEANUP: "true"
      PYTHONUNBUFFERED: "1"
    volumes:
      # Persist session data across restarts
      - ./temp_sessions:/app/temp_sessions
    restart: unless-stopped
